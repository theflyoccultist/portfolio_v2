import{j as s,L as v,R as k,a as j,B as g,r,C as B}from"./index-D_3UBHHu.js";import{C as d}from"./Card-BPBkUwyw.js";import{a as P}from"./axios-B2TGewvf.js";const w=({id:t,title:e,thumbnail:i})=>s.jsx(d,{className:"blog-card",children:s.jsx(v,{to:`/blog/${t}`,children:s.jsx(d.Body,{className:"card-content",children:s.jsxs(k,{xs:2,md:2,lg:2,className:"text-left",children:[s.jsx(j,{children:s.jsx(d.Img,{className:"card-thumbnail",src:i,alt:e})}),s.jsx(j,{children:s.jsx(d.Title,{className:"card-title",children:e})})]})})})},t),y=w,E=({currentPage:t,totalPages:e,onPageChange:i})=>{const l=a=>{a>0&&a<=e&&i(a)};return s.jsxs("div",{children:[s.jsx(g,{variant:"outline-info",onClick:()=>l(t-1),disabled:t===1,children:"Previous"}),Array.from({length:e},(a,o)=>s.jsx(g,{variant:"outline-info",onClick:()=>l(o+1),disabled:t===o+1,children:o+1},o+1)),s.jsx(g,{variant:"outline-info",onClick:()=>l(t+1),disabled:t===e,children:"Next"})]})},L=E,S="https://www.blogging-platform.rinkakuworks.com/backend";function T(){const[t,e]=r.useState([]),[i,l]=r.useState(!0),[a,o]=r.useState(null),[x,f]=r.useState(1),[b,p]=r.useState(0),h=10;r.useEffect(()=>{(async()=>{l(!0),o(null);try{const c=await P.get(`${S}/api/blog`,{headers:{}}),N=c.data.reverse();e(N),p(Math.ceil(c.data.length/h))}catch(c){o("Failed to load blog posts."),console.error("Error fetching blog posts",c)}finally{l(!1)}})()},[]);const C=n=>{f(n)},m=(x-1)*h,u=t.slice(m,m+h);return s.jsxs(B,{id:"blog",className:"blog-container",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-center",children:"Welcome to the blog"}),a&&s.jsx("div",{className:"text-danger",children:a}),i?s.jsx("div",{children:"Loading blog posts..."}):u.length>0?u.map(n=>s.jsx(y,{id:n.id,title:n.title,thumbnail:n.thumbnail},n.id)):s.jsx("div",{className:"text-center",children:"No blog posts found."})]}),s.jsx("div",{className:"pagination",children:s.jsx(L,{currentPage:x,totalPages:b,onPageChange:C})})]})}export{T as default};
