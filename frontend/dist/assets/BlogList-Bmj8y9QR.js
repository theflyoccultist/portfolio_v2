import{j as s,L as k,R as B,a as j,B as g,r as i,C as P}from"./index-DJp-eaic.js";import{p as y,a as w}from"./axios-DB0bHnTO.js";import{C as d}from"./Card-D1NdL0rQ.js";const E=({id:e,title:n,thumbnail:c,excerpt:a})=>s.jsx(d,{className:"blog-card",children:s.jsx(k,{to:`/blog/${e}`,children:s.jsx(d.Body,{className:"card-content",children:s.jsxs(B,{xs:2,md:2,lg:2,className:"text-left",children:[s.jsx(j,{children:s.jsx(d.Img,{className:"card-thumbnail",src:c,alt:n})}),s.jsxs(j,{children:[s.jsx(d.Title,{className:"card-title",children:n}),s.jsx(d.Text,{className:"card-dezcription",dangerouslySetInnerHTML:{__html:y.sanitize(a)}})]})]})})})},e),L=E,S=({currentPage:e,totalPages:n,onPageChange:c})=>{const a=o=>{o>0&&o<=n&&c(o)};return s.jsxs("div",{children:[s.jsx(g,{variant:"outline-info",onClick:()=>a(e-1),disabled:e===1,children:"Previous"}),Array.from({length:n},(o,r)=>s.jsx(g,{variant:"outline-info",onClick:()=>a(r+1),disabled:e===r+1,children:r+1},r+1)),s.jsx(g,{variant:"outline-info",onClick:()=>a(e+1),disabled:e===n,children:"Next"})]})},I=S,T="https://www.blogging-platform.rinkakuworks.com/backend";function z(){const[e,n]=i.useState([]),[c,a]=i.useState(!0),[o,r]=i.useState(null),[m,f]=i.useState(1),[p,b]=i.useState(0),h=10;i.useEffect(()=>{(async()=>{a(!0),r(null);try{const l=await w.get(`${T}/api/blog`,{headers:{}}),v=l.data.reverse();n(v),b(Math.ceil(l.data.length/h))}catch(l){r("Failed to load blog posts."),console.error("Error fetching blog posts",l)}finally{a(!1)}})()},[]);const C=t=>{f(t)},u=(m-1)*h,x=e.slice(u,u+h),N=(t,l)=>t.length<=l?t:t.substring(0,l).trimEnd()+"...";return s.jsxs(P,{id:"blog",className:"blog-container",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-center",children:"Welcome to the blog"}),o&&s.jsx("div",{className:"text-danger",children:o}),c?s.jsx("div",{children:"Loading blog posts..."}):x.length>0?x.map(t=>s.jsx(L,{id:t.id,title:t.title,thumbnail:t.thumbnail,excerpt:N(t.content,60)},t.id)):s.jsx("div",{className:"text-center",children:"No blog posts found."})]}),s.jsx("div",{className:"pagination",children:s.jsx(I,{currentPage:m,totalPages:p,onPageChange:C})})]})}export{z as default};
