import{j as s,L as B,R as P,a as j,B as g,r as c,C as v}from"./index-CoE9ZfNq.js";import{p as y,a as w}from"./axios-BmfHirOK.js";import{C as d}from"./Card-FEz0bu9j.js";const E=({id:e,title:n,thumbnail:i,excerpt:a})=>s.jsx(d,{className:"blog-card",children:s.jsx(B,{to:`/blog/${e}`,children:s.jsx(d.Body,{className:"card-content",children:s.jsxs(P,{xs:2,md:2,lg:2,className:"text-left",children:[s.jsx(j,{children:s.jsx(d.Img,{className:"card-thumbnail",src:i,alt:n})}),s.jsxs(j,{children:[s.jsx(d.Title,{className:"card-title",children:n}),s.jsx(d.Text,{className:"card-dezcription",dangerouslySetInnerHTML:{__html:y.sanitize(a)}})]})]})})})},e),L=E,S=({currentPage:e,totalPages:n,onPageChange:i})=>{const a=o=>{o>0&&o<=n&&i(o)};return s.jsxs("div",{children:[s.jsx(g,{onClick:()=>a(e-1),disabled:e===1,children:"Previous"}),Array.from({length:n},(o,r)=>s.jsx(g,{onClick:()=>a(r+1),disabled:e===r+1,children:r+1},r+1)),s.jsx(g,{onClick:()=>a(e+1),disabled:e===n,children:"Next"})]})},I=S,T="https://www.blogging-platform.rinkakuworks.com/backend";function z(){const[e,n]=c.useState([]),[i,a]=c.useState(!0),[o,r]=c.useState(null),[m,p]=c.useState(1),[f,b]=c.useState(0),h=10;c.useEffect(()=>{(async()=>{a(!0),r(null);try{const l=await w.get(`${T}/api/blog`,{headers:{}}),k=l.data.reverse();n(k),b(Math.ceil(l.data.length/h))}catch(l){r("Failed to load blog posts."),console.error("Error fetching blog posts",l)}finally{a(!1)}})()},[]);const C=t=>{p(t)},x=(m-1)*h,u=e.slice(x,x+h),N=(t,l)=>t.length<=l?t:t.substring(0,l).trimEnd()+"...";return s.jsxs(v,{id:"blog",className:"blog-container",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-center",children:"Welcome to the blog"}),o&&s.jsx("div",{className:"text-danger",children:o}),i?s.jsx("div",{children:"Loading blog posts..."}):u.length>0?u.map(t=>s.jsx(L,{id:t.id,title:t.title,thumbnail:t.thumbnail,excerpt:N(t.content,60)},t.id)):s.jsx("div",{className:"text-center",children:"No blog posts found."})]}),s.jsx("div",{style:{bottom:"0px"},children:s.jsx(I,{currentPage:m,totalPages:f,onPageChange:C})})]})}export{z as default};
